<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.javasm.crm.user.mapper.UserMapper">
    <resultMap id="BaseResultMap" type="com.javasm.crm.user.entity.User">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        <id column="uid" jdbcType="INTEGER" property="uid"/>
        <result column="uname" jdbcType="VARCHAR" property="uname"/>
        <result column="password" jdbcType="VARCHAR" property="password"/>
        <result column="age" jdbcType="INTEGER" property="age"/>
        <result column="user_status" jdbcType="INTEGER" property="userStatus"/>
        <result column="login_name" jdbcType="VARCHAR" property="loginName"/>
        <result column="dept_id" jdbcType="INTEGER" property="deptId"/>
        <result column="position_id" jdbcType="INTEGER" property="positionId"/>
        <result column="role_id" jdbcType="INTEGER" property="roleId"/>
        <result column="phone" jdbcType="VARCHAR" property="phone"/>
        <result column="email" jdbcType="VARCHAR" property="email"/>
        <result column="ip_address" jdbcType="VARCHAR" property="ipAddress"/>
        <result column="creatime" jdbcType="VARCHAR" property="creatime"/>
        <result column="creat_name" jdbcType="VARCHAR" property="creatName"/>
        <result column="gender" jdbcType="INTEGER" property="gender"/>

        <association property="department" javaType="com.javasm.crm.user.entity.Department">
            <id column="dept_id" property="deptId" jdbcType="INTEGER"/>
            <result property="deptName" column="dept_name" jdbcType="VARCHAR"/>
        </association>

        <association property="role" javaType="com.javasm.crm.user.entity.Role">
            <id property="roleId" column="role_id" jdbcType="INTEGER"/>
            <result property="roleName" column="role_name" jdbcType="VARCHAR"/>
            <result property="roleEncoding" column="role_encoding" jdbcType="VARCHAR"/>
            <result property="roleStatus" column="role_status" jdbcType="INTEGER"/>
            <result property="roleDescription" column="role_description" jdbcType="VARCHAR"/>
        </association>

        <association property="position" javaType="com.javasm.crm.user.entity.Position">
            <id property="positionId" column="position_id"/>
            <result property="positionName" column="position_name"/>
        </association>

    </resultMap>
    <sql id="Base_Column_List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        `uid`, uname, `password`, age, user_status, login_name, dept_id, position_id, role_id,
        phone, email, ip_address, creatime, creat_name, gender
    </sql>
    <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        SELECT
        <include refid="Base_Column_List"/>
        FROM user
        WHERE `uid` = #{uid,jdbcType=INTEGER}
    </select>
    <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        DELETE FROM user
        WHERE `uid` = #{uid,jdbcType=INTEGER}
    </delete>
    <insert id="insert" keyColumn="uid" keyProperty="uid" parameterType="com.javasm.crm.user.entity.User"
            useGeneratedKeys="true">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        INSERT INTO user (uname, `password`, age,
        user_status, login_name, dept_id,
        position_id, role_id, phone,
        email, ip_address, creatime,
        creat_name, gender)
        VALUES (#{uname,jdbcType=VARCHAR}, #{password,jdbcType=VARCHAR}, #{age,jdbcType=INTEGER},
        #{userStatus,jdbcType=INTEGER}, #{loginName,jdbcType=VARCHAR}, #{deptId,jdbcType=INTEGER},
        #{positionId,jdbcType=INTEGER}, #{roleId,jdbcType=INTEGER}, #{phone,jdbcType=VARCHAR},
        #{email,jdbcType=VARCHAR}, #{ipAddress,jdbcType=VARCHAR}, #{creatime,jdbcType=VARCHAR},
        #{creatName,jdbcType=VARCHAR}, #{gender,jdbcType=INTEGER})
    </insert>
    <insert id="insertSelective" keyColumn="uid" keyProperty="uid" parameterType="com.javasm.crm.user.entity.User"
            useGeneratedKeys="true">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        INSERT INTO user
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="uname != null">
                uname,
            </if>
            <if test="password != null">
                `password`,
            </if>
            <if test="age != null">
                age,
            </if>
            <if test="userStatus != null">
                user_status,
            </if>
            <if test="loginName != null">
                login_name,
            </if>
            <if test="deptId != null">
                dept_id,
            </if>
            <if test="positionId != null">
                position_id,
            </if>
            <if test="roleId != null">
                role_id,
            </if>
            <if test="phone != null">
                phone,
            </if>
            <if test="email != null">
                email,
            </if>
            <if test="ipAddress != null">
                ip_address,
            </if>
            <if test="creatime != null">
                creatime,
            </if>
            <if test="creatName != null">
                creat_name,
            </if>
            <if test="gender != null">
                gender,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="uname != null">
                #{uname,jdbcType=VARCHAR},
            </if>
            <if test="password != null">
                #{password,jdbcType=VARCHAR},
            </if>
            <if test="age != null">
                #{age,jdbcType=INTEGER},
            </if>
            <if test="userStatus != null">
                #{userStatus,jdbcType=INTEGER},
            </if>
            <if test="loginName != null">
                #{loginName,jdbcType=VARCHAR},
            </if>
            <if test="deptId != null">
                #{deptId,jdbcType=INTEGER},
            </if>
            <if test="positionId != null">
                #{positionId,jdbcType=INTEGER},
            </if>
            <if test="roleId != null">
                #{roleId,jdbcType=INTEGER},
            </if>
            <if test="phone != null">
                #{phone,jdbcType=VARCHAR},
            </if>
            <if test="email != null">
                #{email,jdbcType=VARCHAR},
            </if>
            <if test="ipAddress != null">
                #{ipAddress,jdbcType=VARCHAR},
            </if>
            <if test="creatime != null">
                #{creatime,jdbcType=VARCHAR},
            </if>
            <if test="creatName != null">
                #{creatName,jdbcType=VARCHAR},
            </if>
            <if test="gender != null">
                #{gender,jdbcType=INTEGER},
            </if>
        </trim>
    </insert>
    <update id="updateByPrimaryKeySelective" parameterType="com.javasm.crm.user.entity.User">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        UPDATE user
        <set>
            <if test="uname != null">
                uname = #{uname,jdbcType=VARCHAR},
            </if>
            <if test="password != null">
                `password` = #{password,jdbcType=VARCHAR},
            </if>
            <if test="age != null">
                age = #{age,jdbcType=INTEGER},
            </if>
            <if test="userStatus != null">
                user_status = #{userStatus,jdbcType=INTEGER},
            </if>
            <if test="loginName != null">
                login_name = #{loginName,jdbcType=VARCHAR},
            </if>
            <if test="deptId != null">
                dept_id = #{deptId,jdbcType=INTEGER},
            </if>
            <if test="positionId != null">
                position_id = #{positionId,jdbcType=INTEGER},
            </if>
            <if test="roleId != null">
                role_id = #{roleId,jdbcType=INTEGER},
            </if>
            <if test="phone != null">
                phone = #{phone,jdbcType=VARCHAR},
            </if>
            <if test="email != null">
                email = #{email,jdbcType=VARCHAR},
            </if>
            <if test="ipAddress != null">
                ip_address = #{ipAddress,jdbcType=VARCHAR},
            </if>
            <if test="creatime != null">
                creatime = #{creatime,jdbcType=VARCHAR},
            </if>
            <if test="creatName != null">
                creat_name = #{creatName,jdbcType=VARCHAR},
            </if>
            <if test="gender != null">
                gender = #{gender,jdbcType=INTEGER},
            </if>
        </set>
        WHERE `uid` = #{uid,jdbcType=INTEGER}
    </update>
    <update id="updateByPrimaryKey" parameterType="com.javasm.crm.user.entity.User">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        UPDATE user
        SET uname = #{uname,jdbcType=VARCHAR},
        `password` = #{password,jdbcType=VARCHAR},
        age = #{age,jdbcType=INTEGER},
        user_status = #{userStatus,jdbcType=INTEGER},
        login_name = #{loginName,jdbcType=VARCHAR},
        dept_id = #{deptId,jdbcType=INTEGER},
        position_id = #{positionId,jdbcType=INTEGER},
        role_id = #{roleId,jdbcType=INTEGER},
        phone = #{phone,jdbcType=VARCHAR},
        email = #{email,jdbcType=VARCHAR},
        ip_address = #{ipAddress,jdbcType=VARCHAR},
        creatime = #{creatime,jdbcType=VARCHAR},
        creat_name = #{creatName,jdbcType=VARCHAR},
        gender = #{gender,jdbcType=INTEGER}
        WHERE `uid` = #{uid,jdbcType=INTEGER}
    </update>
    <update id="updateBatch" parameterType="java.util.List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        UPDATE user
        <trim prefix="set" suffixOverrides=",">
            <trim prefix="uname = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.uname,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="`password` = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.password,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="age = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.age,jdbcType=INTEGER}
                </foreach>
            </trim>
            <trim prefix="user_status = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.userStatus,jdbcType=INTEGER}
                </foreach>
            </trim>
            <trim prefix="login_name = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.loginName,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="dept_id = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.deptId,jdbcType=INTEGER}
                </foreach>
            </trim>
            <trim prefix="position_id = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.positionId,jdbcType=INTEGER}
                </foreach>
            </trim>
            <trim prefix="role_id = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.roleId,jdbcType=INTEGER}
                </foreach>
            </trim>
            <trim prefix="phone = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.phone,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="email = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.email,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="ip_address = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.ipAddress,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="creatime = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.creatime,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="creat_name = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.creatName,jdbcType=VARCHAR}
                </foreach>
            </trim>
            <trim prefix="gender = case" suffix="end,">
                <foreach collection="list" index="index" item="item">
                    when `uid` = #{item.uid,jdbcType=INTEGER} THEN #{item.gender,jdbcType=INTEGER}
                </foreach>
            </trim>
        </trim>
        WHERE `uid` IN
        <foreach close=")" collection="list" item="item" open="(" separator=", ">
            #{item.uid,jdbcType=INTEGER}
        </foreach>
    </update>
    <insert id="batchInsert" keyColumn="uid" keyProperty="uid" parameterType="list" useGeneratedKeys="true">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        INSERT INTO user
        (uname, `password`, age, user_status, login_name, dept_id, position_id, role_id,
        phone, email, ip_address, creatime, creat_name, gender)
        VALUES
        <foreach collection="list" item="item" separator=",">
            (#{item.uname,jdbcType=VARCHAR}, #{item.password,jdbcType=VARCHAR}, #{item.age,jdbcType=INTEGER},
            #{item.userStatus,jdbcType=INTEGER}, #{item.loginName,jdbcType=VARCHAR}, #{item.deptId,jdbcType=INTEGER},
            #{item.positionId,jdbcType=INTEGER}, #{item.roleId,jdbcType=INTEGER}, #{item.phone,jdbcType=VARCHAR},
            #{item.email,jdbcType=VARCHAR}, #{item.ipAddress,jdbcType=VARCHAR}, #{item.creatime,jdbcType=VARCHAR},
            #{item.creatName,jdbcType=VARCHAR}, #{item.gender,jdbcType=INTEGER})
        </foreach>
    </insert>
    <delete id="batchDeleteUsers" parameterType="java.util.List">
        DELETE FROM user WHERE uid IN
        <foreach close=")" collection="list" index="index" item="item" open="(" separator=",">
            #{item}
        </foreach>
    </delete>
    <select id="selectAllUser" resultMap="BaseResultMap">
        SELECT `user`.uid,
        `user`.uname,
        `user`.`password`,
        `user`.age,
        `user`.user_status,
        `user`.login_name,
        `user`.dept_id,
        `user`.position_id,
        `user`.role_id,
        `user`.phone,
        `user`.email,
        `user`.ip_address,
        `user`.creatime,
        `user`.creat_name,
        `user`.gender,
        department.dept_name,
        position.position_name,
        role.role_name
        FROM `user`
        LEFT JOIN department ON `user`.dept_id = department.dept_id
        LEFT JOIN position ON `user`.position_id = position.position_id
        LEFT JOIN role ON `user`.role_id = role.role_id
        <where>
            <if test="uname != null and uname != ''">
                `user`.uname = #{uname,jdbcType=VARCHAR}
            </if>
            <if test="userStatus != null and userStatus !=''">
                AND `user`.user_status = #{userStatus,jdbcType=INTEGER}
            </if>
            <if test="loginName != null and loginName != ''">
                AND `user`.login_name = #{loginName,jdbcType=VARCHAR}
            </if>
            <if test="deptId != null and deptId !=''">
                AND `user`.dept_id = #{deptId,jdbcType=INTEGER}
            </if>
            <if test="positionId != null and positionId !=''">
                AND `user`.position_id = #{positionId,jdbcType=INTEGER}
            </if>
            <if test="roleId != null and roleId !=''">
                AND `user`.role_id = #{roleId,jdbcType=INTEGER}
            </if>
            <if test="gender != null and gender !=''">
                AND `user`.gender = #{gender,jdbcType=INTEGER}
            </if>
        </where>
        ORDER BY user.uid
    </select>
</mapper>